name: Release chart helm

on:
  workflow_call:
    inputs:
      chart_url:
        required: true
        type: string
      chart_path:
        required: true
        type: string

jobs:

  chart-release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0

      - name: Run chart-releaser
        uses: helm/chart-releaser-action@v1.0.0
        with:
          charts_dir: ${{ inputs.chart_path }}
          charts_repo_url: ${{ inputs.chart_url }}
        env:
          CR_TOKEN: ${{ secrets.GITHUB_TOKEN }}

